<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.js"></script>
</head>
<body>
<script>
let glitchlen = 0;
let img;
function preload() {
  img = loadImage('Images/IMG_3403.jpg');
}


function setup() {
  createCanvas(windowWidth, windowHeight);
  image(img, 0, 0);
  createCanvas(400, 600);
  
  // Call the resize function
  img.resize(width, height);
}

function draw() {
  background(220);
  
  // Draw one image at full size at (0,0);
  image(img, 0, 0);
  }


function draw() {
  
  // update screen
  if(frameCount%100==0){
    
    // new background
    //background((0), (200), (0));
    image(img, 0, 0);
    // new colored circle
    //fill((3), (110), (255));
    //rect(0, 0, windowWidth/2, windowHeight);

    // random glitch pixel length
    glitchlen = int((4,2400))*6;
    // edit the pixels array
    loadPixels();
    // channel shift?
    let channelshift = int(random(400,100));
    // loop over chunks
    for(let i=0; i<pixels.length; i=i+glitchlen){
      // set all pixels in chunk to color of the first pixel
      for(let p=channelshift; p<glitchlen; p+=4){
        pixels[i+p] = pixels[i];
        pixels[i+p+1] = pixels[i+1];
       // pixels[i+p+2] = pixels[i+2];
        //pixels[i+p+3] = pixels[i+3];
      }
    }
    updatePixels();
  }
}

</script>
    

</body>
</html>